/* Import */

import { ebleScroll } from './toggleScroll.min.js';
import { disableScroll } from './toggleScroll.min.js';
import { fixingHeader } from './fixingHeader.min.js';
import { showBurgerMenu } from './toggleBurgerMenu.min.js';
import { hideBurgerMenu } from './toggleBurgerMenu.min.js';
import { showModalWin } from './toggleModalWindow.min.js';
import { hideModalWin } from './toggleModalWindow.min.js';
import { checkInputs } from './checkInputs.min.js';
import { send } from './sendAjax.min.js';
import { smoothScrolling } from './smoothScrollingLinks.min.js';

$(function() {
    /* Varriables */
    
    const burgerMenu = $('.burger-menu');
    const burgerMenuShowBtn = $('.burger-menu-btn');
    const burgerMenuHideBtn = $('.burger-menu__hide-menu');
    
    const letsTalkShowBtn = $('.lets-talk');
    const letsTalkHideBtn = $('.lats-talk__close-btn');
    const latsTalkBg = $('.lats-talk-bg');
    const latsTalk = $('.lats-talk');
    
    const latsTalkInputs = { name: $('.input__name.lats-talk__input')[0], email: $('.input__email.lats-talk__input')[0], message: $('.input__message.lats-talk__input')[0] };
    const latsTalkSendBtn = $('.lats-talk__send-message');
    
    const contactUsSendBtn = $('.contact-us__send-message');
    const contactUsInputs = { name: $('.input__name.contact-us__input')[0], email: $('.input__email.contact-us__input')[0], message: $('.input__message.contact-us__input')[0] };
    
    const linksArmature = $('.burger-menu__link-armature');
    
    /* Event handlers */
    
    
    /* Fixing header */
    
    $(window).on('scroll', fixingHeader);
    
    /* Burger menu */
    
    burgerMenuShowBtn.on('click', () =>  showBurgerMenu(burgerMenu));
    burgerMenuHideBtn.on('click', () => hideBurgerMenu(burgerMenu));
    
    /* Modal windows */
    
    letsTalkShowBtn.each((index, element) => $(element).on('click', () => showModalWin(latsTalkBg, latsTalk)));
    
    letsTalkHideBtn.each((index, element) => $(element).on('click', () => hideModalWin(latsTalkBg, latsTalk)));
    
    latsTalkBg.on('click', (e) => { if ($(e.target).hasClass('modal-window-bg')) hideModalWin(latsTalkBg, latsTalk) });
    
    /* Smooth scrolling */
    
    linksArmature.each((index, element) => $(element).on('click', (e) => smoothScrolling(element, e)));
    
    /* Check and send forms */
    
    latsTalkSendBtn.on('click', (e) => {
        const check = checkInputs(latsTalkInputs, e);
        
        if (check) {
            send(e, $(latsTalkInputs.name), $(latsTalkInputs.email), $(latsTalkInputs.message));
            
            hideModalWin($(e.target).closest('.modal-window-bg'), $(e.target).closest('.modal-window'));
        }
    });
    
    contactUsSendBtn.on('click', (e) => {
        const check = checkInputs(contactUsInputs, e);
        
        if (check) {
            send(e, $(contactUsInputs.name), $(contactUsInputs.email), $(contactUsInputs.message));
            
            hideModalWin($(e.target).closest('.modal-window-bg'), $(e.target).closest('.modal-window'));
        }
    });
});
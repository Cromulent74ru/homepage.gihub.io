import { deleteInputError } from './deleteInputError.min.js';

export function checkInputs(inputs, e) {
    e.preventDefault();
    
    /* Varriables */
    
    const name = inputs.name;
    const email = inputs.email;
    const message = inputs.message;
    
    let checkName = false;
    let checkEmail = false;
    let checkMessage = false;
    
    let countDog = 0;
    let countBefore = 0;
    
    /* Code */
    
    $(name).on('focus', () => deleteInputError(name));
    $(email).on('focus', () => deleteInputError(email));
    $(message).on('focus', () => deleteInputError(message));
    
    if ($(name).val() != '' && $(name).val() != ' ')
        checkName = true;
    else
        $(name).addClass('input-error');
    if ($(message).val() != '' && $(message).val() != ' ')
        checkMessage = true;
    else
        $(message).addClass('input-error');
    
    for (let i = 0; i <= $(email).val().length - 1; i++) {
        if ($(email).val()[i] == '@')
            countDog++;
        if (countDog < 1)
            countBefore++;
    }
    
    const countAfter = email.length - countBefore - 1;
    
    if (countBefore >= 1) {
        if ($(email).val()[0] != '1' && $(email).val()[0] != '2' && $(email).val()[0] != '3' && $(email).val()[0] != '4' && $(email).val()[0] != '5' && $(email).val()[0] != '6' && $(email).val()[0] != '7' && $(email).val()[0] != '8' && $(email).val()[0] != '9' && countAfter != 1 && $(email).val()[countBefore + 2] != '1' && $(email).val()[countBefore + 2] != '2' && $(email).val()[countBefore + 2] != '3' && $(email).val()[countBefore + 2] != '4' && $(email).val()[countBefore + 2] != '5' && $(email).val()[countBefore + 2] != '6' && $(email).val()[countBefore + 2] != '7' && $(email).val()[countBefore + 2] != '8' && $(email).val()[countBefore + 2] != '9' && countDog == 1)
            checkEmail = true;
    } else
        $(email).addClass('input-error');
    
    if (checkName && checkEmail && checkMessage)
        return true;
    else
        return {
            name: checkName,
            email: checkEmail,
            message: checkMessage
        };
}
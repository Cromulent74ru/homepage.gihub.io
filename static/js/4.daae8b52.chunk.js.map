{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","components/pages/users/users.module.css","components/pages/users/users.jsx","components/pages/users/users-container.jsx","hocs/withRedirectSecurity.js"],"names":["_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","module","exports","Users","React","memo","props","friends","useMemo","map","element","index","className","styles","to","id","src","photos","large","avatar","alt","name","onClick","onUnFollow","users","onFollow","value","isFetchingFriends","elements","disabled","pageFriends","onPagePrevFriends","Number","maxCountFriends","pageSize","onPageNextFriends","isFetchingUsers","pageUsers","onPagePrevUsers","maxCountUsers","onPageNextUsers","UsersContainer","useState","changePageFriends","changePageUsers","useEffect","getUsers","getFriends","a","follow","unFollow","compose","connect","state","getCurrentFetchingFriends","getCurrentFetchingUsers","getArrayUsers","getArrayFriends","getMaxCountFriends","getMaxCountUsers","Component","isAuth","getCurrentAuth"],"mappings":"sGACe,SAASA,EAAyBC,EAAQC,GACvD,GAAc,MAAVD,EAAgB,MAAO,GAC3B,IACIE,EAAKC,EADLC,ECHS,SAAuCJ,EAAQC,GAC5D,GAAc,MAAVD,EAAgB,MAAO,GAC3B,IAEIE,EAAKC,EAFLC,EAAS,GACTC,EAAaC,OAAOC,KAAKP,GAG7B,IAAKG,EAAI,EAAGA,EAAIE,EAAWG,OAAQL,IACjCD,EAAMG,EAAWF,GACbF,EAASQ,QAAQP,IAAQ,IAC7BE,EAAOF,GAAOF,EAAOE,IAGvB,OAAOE,EDTM,CAA6BJ,EAAQC,GAGlD,GAAIK,OAAOI,sBAAuB,CAChC,IAAIC,EAAmBL,OAAOI,sBAAsBV,GAEpD,IAAKG,EAAI,EAAGA,EAAIQ,EAAiBH,OAAQL,IACvCD,EAAMS,EAAiBR,GACnBF,EAASQ,QAAQP,IAAQ,GACxBI,OAAOM,UAAUC,qBAAqBC,KAAKd,EAAQE,KACxDE,EAAOF,GAAOF,EAAOE,IAIzB,OAAOE,E,uDEhBTW,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,kBAAkB,+BAA+B,gBAAgB,6BAA6B,MAAQ,qBAAqB,kBAAkB,+BAA+B,gBAAgB,6BAA6B,YAAY,yBAAyB,yBAAyB,sCAAsC,qBAAqB,kCAAkC,KAAO,oBAAoB,OAAS,sBAAsB,KAAO,oBAAoB,KAAO,oBAAoB,gBAAgB,6BAA6B,YAAY,yBAAyB,OAAS,wB,mKC6E/lBC,EApEDC,IAAMC,MAAK,SAAAC,GAGrB,IAAMC,EAAUC,mBAAQ,kBAAMF,EAAMC,QAAQE,KAAI,SAACC,EAASC,GACtD,OACI,sBAAiBC,UAAWC,IAAM,KAAlC,UACI,cAAC,IAAD,CAASC,GAAE,mBAAcJ,EAAQK,IAAjC,SACI,qBAAKC,IAAKN,EAAQO,OAAOC,MAAQR,EAAQO,OAAOC,MAAQC,IAAQC,IAAI,cAAcR,UAAWC,IAAM,WAEvG,sBAAKD,UAAWC,IAAM,KAAtB,UACI,cAAC,IAAD,CAASD,UAAWC,IAAM,KAAUC,GAAE,mBAAcJ,EAAQK,IAA5D,SAAmEL,EAAQW,OAC3E,cAAC,IAAD,CAASP,GAAE,oBAAeJ,EAAQK,IAAMH,UAAWC,IAAO,iBAA1D,qHACA,wBAAQD,UAAWC,IAAO,aAAcS,QAAS,kBAAMhB,EAAMiB,WAAWb,EAAQK,KAAhF,+GAPEJ,QAWd,CAACL,EAAMC,UAELiB,EAAQhB,mBAAQ,kBAAMF,EAAMkB,MAAMf,KAAI,SAACC,EAASC,GAClD,OACI,sBAAiBC,UAAWC,IAAM,KAAlC,UACI,cAAC,IAAD,CAASC,GAAE,mBAAcJ,EAAQK,IAAjC,SACI,qBAAKC,IAAKN,EAAQO,OAAOC,MAAQR,EAAQO,OAAOC,MAAQC,IAAQC,IAAI,cAAcR,UAAWC,IAAM,WAEvG,sBAAKD,UAAWC,IAAM,KAAtB,UACI,cAAC,IAAD,CAASD,UAAWC,IAAM,KAAUC,GAAE,mBAAcJ,EAAQK,IAA5D,SAAmEL,EAAQW,OAC3E,wBAAQT,UAAWC,IAAM,OAAYS,QAAS,kBAAMhB,EAAMmB,SAASf,EAAQK,KAA3E,+GANEJ,QAUd,CAACL,EAAMkB,QAIX,OACI,0BAASZ,UAAWC,IAAM,MAA1B,UACI,sBAAKD,UAAWC,IAAO,mBAAvB,UACI,oBAAID,UAAWC,IAAM,MAArB,kDACA,qBAAKD,UAAWC,IAAM,QAAtB,SACI,cAAC,IAAD,CACIa,MAAOpB,EAAMqB,kBACbC,SAAUrB,MAGlB,sBAAKK,UAAWC,IAAO,mBAAvB,UACI,wBAAQgB,SAAUvB,EAAMwB,aAAe,EAAGlB,UAAS,UAAKN,EAAMwB,aAAe,GAAKjB,IAAO,0BAAtC,YAAmEA,IAAO,kBAAoBS,QAAShB,EAAMyB,kBAAhK,4CACA,wBAAQF,SAAUG,OAAO1B,EAAM2B,kBAAqBD,OAAO1B,EAAM4B,UAAYF,OAAO1B,EAAMwB,aAAelB,UAAS,UAAKoB,OAAO1B,EAAM2B,kBAAqBD,OAAO1B,EAAM4B,UAAYF,OAAO1B,EAAMwB,cAAiBjB,IAAO,sBAArG,YAA8HA,IAAO,cAAgBS,QAAShB,EAAM6B,kBAAtR,wDAGR,sBAAKvB,UAAWC,IAAO,iBAAvB,UACI,oBAAID,UAAWC,IAAM,MAArB,sFACA,qBAAKD,UAAWC,IAAM,QAAtB,SACI,cAAC,IAAD,CACIa,MAAOpB,EAAM8B,gBACbR,SAAUJ,MAGlB,sBAAKZ,UAAWC,IAAO,mBAAvB,UACI,wBAAQgB,SAAUvB,EAAM+B,WAAa,EAAGzB,UAAS,UAAKN,EAAM+B,WAAa,GAAKxB,IAAO,0BAApC,YAAiEA,IAAO,kBAAoBS,QAAShB,EAAMgC,gBAA5J,4CACA,wBAAQT,SAAUG,OAAO1B,EAAMiC,gBAAmBP,OAAO1B,EAAM4B,UAAYF,OAAO1B,EAAM+B,WAAazB,UAAS,UAAKoB,OAAO1B,EAAMiC,gBAAmBP,OAAO1B,EAAM4B,UAAYF,OAAO1B,EAAM+B,YAAexB,IAAO,sBAAjG,YAA0HA,IAAO,cAAgBS,QAAShB,EAAMkC,gBAA9Q,8D,kCCpDdC,EAAiBrC,IAAMC,MAAK,SAAAC,GAAS,MAGEoC,mBAAS,GAHX,mBAGhCZ,EAHgC,KAGnBa,EAHmB,OAIFD,mBAAS,GAJP,mBAIhCL,EAJgC,KAIrBO,EAJqB,OAKJF,mBAAS,GALL,mBAKhCR,EALgC,UASvCW,qBAAU,WACNvC,EAAMwC,SAAST,EAAWH,GAC1B5B,EAAMyC,WAAWjB,EAAaI,KAC/B,IAIH,IAgBMT,EAAQ,uCAAG,WAAOV,GAAP,SAAAiC,EAAA,sEACP1C,EAAM2C,OAAOlC,GADN,OAEbT,EAAMyC,WAAWjB,EAAaI,GAC9B5B,EAAMwC,SAAST,EAAWH,GAHb,2CAAH,sDAKRX,EAAU,uCAAG,WAAOR,GAAP,SAAAiC,EAAA,sEACT1C,EAAM4C,SAASnC,GADN,OAEfT,EAAMyC,WAAWjB,EAAaI,GAC9B5B,EAAMwC,SAAST,EAAWH,GAHX,2CAAH,sDAQhB,OACI,cAAC,EAAD,2BACQ5B,GADR,IAEImB,SAAUA,EACVF,WAAYA,EACZO,YAAaA,EACbO,UAAWA,EACXH,SAAUA,EACVM,gBArCgB,WACpBI,EAAgBP,EAAY,GAC5B/B,EAAMwC,SAAST,EAAY,EAAGH,IAoC1BI,gBAlCgB,WACpBM,EAAgBP,EAAY,GAC5B/B,EAAMwC,SAAST,EAAY,EAAGH,IAiC1BC,kBA/BkB,WACtBQ,EAAkBb,EAAc,GAChCxB,EAAMyC,WAAWjB,EAAc,EAAGI,IA8B9BH,kBA5BkB,WACtBY,EAAkBb,EAAc,GAChCxB,EAAMyC,WAAWjB,EAAc,EAAGI,UA4C3BiB,sBACXC,aAZoB,SAAAC,GAAK,MAAK,CAC9B1B,kBAAmB2B,YAA0BD,GAC7CjB,gBAAiBmB,YAAwBF,GACzC7B,MAAOgC,YAAcH,GACrB9C,QAASkD,YAAgBJ,GACzBpB,gBAAiByB,YAAmBL,GACpCd,cAAeoB,YAAiBN,MAMP,CACrBP,aACAC,eACAE,WACAC,gBCtF4B,SAACU,GAmBjC,OAAOT,YACHC,aAPoB,SAAAC,GAAK,MAAK,CAC9BQ,OAAQC,YAAeT,MAME,MADtBF,EAhBoB,SAAC,GAAwB,IAAvBU,EAAsB,EAAtBA,OAAWvD,EAAW,0BAE/C,OAAIuD,EACO,cAACD,EAAD,eAAetD,IAEf,cAAC,IAAD,CAAUQ,GAAE,gBDyEhBqC,CAQbV","file":"static/js/4.daae8b52.chunk.js","sourcesContent":["import objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"users_users__1kcZS\",\"friends-wrapper\":\"users_friends-wrapper__3bApH\",\"users-wrapper\":\"users_users-wrapper__Chl1W\",\"title\":\"users_title__2yb80\",\"buttons-wrapper\":\"users_buttons-wrapper__1nK5O\",\"previous-page\":\"users_previous-page__3mSBL\",\"next-page\":\"users_next-page__3oERU\",\"previous-page-disabled\":\"users_previous-page-disabled__X4J3U\",\"next-page-disabled\":\"users_next-page-disabled__sECTi\",\"link\":\"users_link__2y74H\",\"avatar\":\"users_avatar__34Tg0\",\"info\":\"users_info__24SBo\",\"name\":\"users_name__10Cal\",\"write-message\":\"users_write-message__1WUeT\",\"un-follow\":\"users_un-follow__3GlfO\",\"follow\":\"users_follow__3QELQ\"};","/* Modules */\r\n\r\nimport React, {useMemo} from 'react';\r\nimport avatar from './../../../assets/images/avatar-icon.png';\r\nimport styles from './users.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {Preloader} from \"../../elements/preloader/preloader\";\r\n\r\n/* Component */\r\n\r\nconst Users = React.memo(props => {\r\n    /* UI elements */\r\n\r\n    const friends = useMemo(() => props.friends.map((element, index) => {\r\n        return (\r\n            <div key={index} className={styles['link']}>\r\n                <NavLink to={`/profile/${element.id}`}>\r\n                    <img src={element.photos.large ? element.photos.large : avatar} alt=\"user avatar\" className={styles['avatar']}/>\r\n                </NavLink>\r\n                <div className={styles['info']}>\r\n                    <NavLink className={styles['name']} to={`/profile/${element.id}`}>{element.name}</NavLink>\r\n                    <NavLink to={`/messages/${element.id}`} className={styles['write-message']}>Написать сообщение</NavLink>\r\n                    <button className={styles['un-follow']} onClick={() => props.onUnFollow(element.id)}>Удалить из друзей</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }), [props.friends]);\r\n\r\n    const users = useMemo(() => props.users.map((element, index) => {\r\n        return (\r\n            <div key={index} className={styles['link']}>\r\n                <NavLink to={`/profile/${element.id}`}>\r\n                    <img src={element.photos.large ? element.photos.large : avatar} alt=\"user avatar\" className={styles['avatar']}/>\r\n                </NavLink>\r\n                <div className={styles['info']}>\r\n                    <NavLink className={styles['name']} to={`/profile/${element.id}`}>{element.name}</NavLink>\r\n                    <button className={styles['follow']} onClick={() => props.onFollow(element.id)}>Добавить в друзья</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }), [props.users]);\r\n\r\n    /* Render of component */\r\n\r\n    return (\r\n        <article className={styles['users']}>\r\n            <div className={styles['friends-wrapper']}>\r\n                <h1 className={styles['title']}>Друзья</h1>\r\n                <div className={styles['content']}>\r\n                    <Preloader\r\n                        value={props.isFetchingFriends}\r\n                        elements={friends}\r\n                    />\r\n                </div>\r\n                <div className={styles['buttons-wrapper']}>\r\n                    <button disabled={props.pageFriends <= 1} className={`${props.pageFriends <= 1 && styles['previous-page-disabled']} ${styles['previous-page']}`} onClick={props.onPagePrevFriends}>Назад</button>\r\n                    <button disabled={Number(props.maxCountFriends) <= (Number(props.pageSize) * Number(props.pageFriends))} className={`${Number(props.maxCountFriends) <= (Number(props.pageSize) * Number(props.pageFriends)) && styles['next-page-disabled']} ${styles['next-page']}`} onClick={props.onPageNextFriends}>Дальше</button>\r\n                </div>\r\n            </div>\r\n            <div className={styles['users-wrapper']}>\r\n                <h1 className={styles['title']}>Пользователи</h1>\r\n                <div className={styles['content']}>\r\n                    <Preloader\r\n                        value={props.isFetchingUsers}\r\n                        elements={users}\r\n                    />\r\n                </div>\r\n                <div className={styles['buttons-wrapper']}>\r\n                    <button disabled={props.pageUsers <= 1} className={`${props.pageUsers <= 1 && styles['previous-page-disabled']} ${styles['previous-page']}`} onClick={props.onPagePrevUsers}>Назад</button>\r\n                    <button disabled={Number(props.maxCountUsers) <= (Number(props.pageSize) * Number(props.pageUsers))} className={`${Number(props.maxCountUsers) <= (Number(props.pageSize) * Number(props.pageUsers)) && styles['next-page-disabled']} ${styles['next-page']}`} onClick={props.onPageNextUsers}>Дальше</button>\r\n                </div>\r\n            </div>\r\n        </article>\r\n    )\r\n});\r\n\r\n/* Export of component */\r\n\r\nexport default Users;","/* Modules */\r\n\r\nimport React, {useEffect, useState} from 'react';\r\nimport {compose} from \"redux\";\r\nimport {connect} from \"react-redux\";\r\nimport Users from \"./users\";\r\nimport {withRedirectSecurity} from \"../../../hocs/withRedirectSecurity\";\r\nimport {follow, getFriends, getUsers, unFollow} from \"../../../redux/reducers/users-reducer\";\r\nimport {\r\n    getArrayFriends,\r\n    getArrayUsers,\r\n    getCurrentFetchingFriends,\r\n    getCurrentFetchingUsers, getMaxCountFriends, getMaxCountUsers\r\n} from \"../../../redux/selectors/selectors\";\r\n\r\n/* Component */\r\n\r\nconst UsersContainer = React.memo(props => {\r\n    /* State */\r\n\r\n    const [pageFriends, changePageFriends] = useState(1);\r\n    const [pageUsers, changePageUsers] = useState(1);\r\n    const [pageSize, changePageSize] = useState(5);\r\n\r\n    /* Effects */\r\n\r\n    useEffect(() => {\r\n        props.getUsers(pageUsers, pageSize);\r\n        props.getFriends(pageFriends, pageSize);\r\n    }, []);\r\n\r\n    /* Event handlers */\r\n\r\n    const onPageNextUsers = () => {\r\n        changePageUsers(pageUsers + 1);\r\n        props.getUsers(pageUsers + 1, pageSize);\r\n    };\r\n    const onPagePrevUsers = () => {\r\n        changePageUsers(pageUsers - 1);\r\n        props.getUsers(pageUsers - 1, pageSize);\r\n    };\r\n    const onPageNextFriends = () => {\r\n        changePageFriends(pageFriends + 1);\r\n        props.getFriends(pageFriends + 1, pageSize);\r\n    };\r\n    const onPagePrevFriends = () => {\r\n        changePageFriends(pageFriends - 1);\r\n        props.getFriends(pageFriends - 1, pageSize);\r\n    };\r\n    const onFollow = async (id) => {\r\n        await props.follow(id);\r\n        props.getFriends(pageFriends, pageSize);\r\n        props.getUsers(pageUsers, pageSize);\r\n    };\r\n    const onUnFollow = async (id) => {\r\n        await props.unFollow(id);\r\n        props.getFriends(pageFriends, pageSize);\r\n        props.getUsers(pageUsers, pageSize);\r\n    };\r\n\r\n    /* Render of component */\r\n\r\n    return (\r\n        <Users\r\n            {...props}\r\n            onFollow={onFollow}\r\n            onUnFollow={onUnFollow}\r\n            pageFriends={pageFriends}\r\n            pageUsers={pageUsers}\r\n            pageSize={pageSize}\r\n            onPageNextUsers={onPageNextUsers}\r\n            onPagePrevUsers={onPagePrevUsers}\r\n            onPageNextFriends={onPageNextFriends}\r\n            onPagePrevFriends={onPagePrevFriends}\r\n        />\r\n    )\r\n});\r\n\r\n/* Creating state for props */\r\n\r\nconst mapStateToProps = state => ({\r\n    isFetchingFriends: getCurrentFetchingFriends(state),\r\n    isFetchingUsers: getCurrentFetchingUsers(state),\r\n    users: getArrayUsers(state),\r\n    friends: getArrayFriends(state),\r\n    maxCountFriends: getMaxCountFriends(state),\r\n    maxCountUsers: getMaxCountUsers(state)\r\n});\r\n\r\n/* Export of component */\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, {\r\n        getUsers,\r\n        getFriends,\r\n        follow,\r\n        unFollow\r\n    }),\r\n    withRedirectSecurity\r\n)(UsersContainer);","/* Modules */\r\n\r\nimport React from 'react';\r\nimport {compose} from \"redux\";\r\nimport {connect} from \"react-redux\";\r\nimport {getCurrentAuth} from \"../redux/selectors/selectors\";\r\nimport {Redirect} from \"react-router\";\r\n\r\n/* High order component */\r\n\r\nexport const withRedirectSecurity = (Component) => {\r\n    /* Container component */\r\n\r\n    const ComponentContainer = ({isAuth, ...props}) => {\r\n\r\n        if (isAuth)\r\n            return <Component {...props}/>;\r\n        else\r\n            return <Redirect to={`/login`}/>;\r\n    };\r\n\r\n    /* Creating state for props */\r\n\r\n    const mapStateToProps = state => ({\r\n        isAuth: getCurrentAuth(state)\r\n    });\r\n\r\n    /* Render of component */\r\n\r\n    return compose(\r\n        connect(mapStateToProps, null)\r\n    )(ComponentContainer);\r\n};"],"sourceRoot":""}